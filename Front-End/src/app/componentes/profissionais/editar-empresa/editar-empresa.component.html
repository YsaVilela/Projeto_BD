<section class="editar-empresa">
  <header>
    <p class="titulo">Editar cadastro da empresa</p>
  </header>

  <div class="dados" *ngIf="pessoaNaoEncontrada == null">
    <div class="dados-pessoa">
      <div class="espaco-titulo">
        <div class="icone-dados-pessoa"></div>
        <p class="titulo-campo">Dados Pessoais</p>
      </div>
      <form class="formulario" [formGroup]="formularioPessoaJuridica">
        <div formGroupName="pessoa" class="campos-endereco">
          <div class="campo">
            <label class="label-input" for="nome">ID</label>
            <p class="numeroId">
              {{ formularioPessoaJuridica.get("id")?.value }}
            </p>
          </div>

          <div class="campo">
            <label class="label-input" for="nome">Nome</label>
            <input
              type="textarea"
              class="input"
              id="nome"
              formControlName="nome"
              placeholder="Digite o nome"
            />
          </div>
          <div
            class="mensagem__erro"
            *ngIf="
            formularioPessoaJuridica.get('pessoa.nome')?.errors?.['required'] &&
            formularioPessoaJuridica.get('pessoa.nome')?.touched
          "
          >
            Nome é obrigatório!
          </div>
          <div
            class="mensagem__erro"
            *ngIf="formularioPessoaJuridica.get('pessoa.nome')?.errors?.['pattern'] "
          >
            Nome não pode conter números ou caracter especial.
          </div>

          <div class="campo">
            <label class="label-input" for="data-constituicao"
              >Data de Constituicao</label
            >
            <input
              type="textarea"
              class="input"
              id="data-constituicao"
              formControlName="dataDeConstituicao"
              placeholder="Digite a data de nascimento/criação"
            />
          </div>
          <div
            class="mensagem__erro"
            *ngIf="formularioPessoaJuridica.get('pessoa.dataDeConstituicao')?.errors?.['required'] && formularioPessoaJuridica.get('pessoa.dataDeConstituicao')?.touched"
          >
            Data é obrigatório!
          </div>
          <div
            class="mensagem__erro"
            *ngIf="formularioPessoaJuridica.get('pessoa.dataDeConstituicao')?.errors?.['pattern'] "
          >
            Formtação esperada 09/02/2024.
          </div>

          <div class="campo">
            <label class="label-input" for="email">Email</label>
            <input
              type="textarea"
              class="input"
              id="email"
              formControlName="email"
              placeholder="Digite o email"
            />
          </div>
          <div
            class="mensagem__erro"
            *ngIf="formularioPessoaJuridica.get('pessoa.email')?.errors?.['required'] && formularioPessoaJuridica.get('pessoa.email')?.touched"
          >
            Email é obrigatório!
          </div>
          <div
            class="mensagem__erro"
            *ngIf="formularioPessoaJuridica.get('pessoa.email')?.errors?.['pattern'] "
          >
            Formato esperado testeemail.com.
          </div>

          <div class="campo">
            <label class="label-input" for="telefone">Telefone</label>
            <input
              type="textarea"
              class="input"
              id="telefone"
              formControlName="telefone"
              placeholder="Digite o telefone"
            />
          </div>
          <div
            class="mensagem__erro"
            *ngIf="formularioPessoaJuridica.get('pessoa.telefone')?.errors?.['required'] && formularioPessoaJuridica.get('pessoa.telefone')?.touched"
          >
            Telefone é obrigatório!
          </div>
          <div
            class="mensagem__erro"
            *ngIf="formularioPessoaJuridica.get('pessoa.telefone')?.errors?.['pattern'] "
          >
            Formato esperado 11912345678
          </div>
        </div>
        <div class="campo">
          <label class="label-input" for="cnpj">Cnpj</label>
          <input
            type="textarea"
            class="input"
            id="cnpj"
            formControlName="cnpj"
            placeholder="Digite o cnpj"
          />
        </div>
        <div
          class="mensagem__erro"
          *ngIf="formularioPessoaJuridica.get('cnpj')?.errors?.['required'] && formularioPessoaJuridica.get('cnpj')?.touched"
        >
          Cnpj é obrigatório!
        </div>
        <div
          class="mensagem__erro"
          *ngIf="formularioPessoaJuridica.get('cnpj')?.errors?.['pattern'] "
        >
          Formato esperado 12345678901234
        </div>
      </form>
    </div>

    <div class="dados-endereco">
      <div class="espaco-titulo">
        <div class="icone-dados-endereco"></div>
        <p class="titulo-campo">Dados Endereço</p>
      </div>
      <form [formGroup]="formularioPessoaJuridica">
        <div formGroupName="pessoa">
          <div formGroupName="endereco" class="campos-endereco">
            <div class="campo">
              <label class="label-input" for="cep">CEP</label>
              <input
                type="textarea"
                class="input"
                id="cep"
                formControlName="cep"
                placeholder="Digite o CEP"
              />
            </div>
            <div
              class="mensagem__erro"
              *ngIf="formularioPessoaJuridica.get('pessoa.endereco.cep')?.errors?.['required'] && formularioPessoaJuridica.get('pessoa.endereco.cep')?.touched"
            >
              CEP é obrigatório!
            </div>
            <div
              class="mensagem__erro"
              *ngIf="formularioPessoaJuridica.get('pessoa.endereco.cep')?.errors?.['pattern'] "
            >
              Formato esperado 00000000
            </div>

            <div class="campo">
              <label class="label-input" for="logradouro">Logradouro</label>
              <input
                type="textarea"
                class="input"
                id="logradouro"
                formControlName="logradouro"
                placeholder="Digite o logradouro"
              />
            </div>
            <div
              class="mensagem__erro"
              *ngIf="formularioPessoaJuridica.get('pessoa.endereco.logradouro')?.errors?.['required'] && formularioPessoaJuridica.get('pessoa.endereco.logradouro')?.touched"
            >
              Logradouro é obrigatório!
            </div>

            <div class="campo">
              <label class="label-input" for="numero">Numero</label>
              <input
                type="textarea"
                class="input"
                id="numero"
                formControlName="numero"
                placeholder="Digite o numero da casa ou empresa"
              />
            </div>
            <div
              class="mensagem__erro"
              *ngIf="formularioPessoaJuridica.get('pessoa.endereco.numero')?.errors?.['required'] && formularioPessoaJuridica.get('pessoa.endereco.numero')?.touched"
            >
              Número do endereço é obrigatório!
            </div>

            <div class="campo">
              <label class="label-input" for="complemento">Complemento</label>
              <input
                type="textarea"
                class="input"
                id="complemento"
                formControlName="complemento"
                placeholder="Digite o complemento"
              />
            </div>

            <div formGroupName="cidade">
              <div formGroupName="estado">
                <div class="campo">
                  <label class="label-input" for="estado">Estado</label>
                  <select
                    class="input"
                    id="uf"
                    formControlName="uf"
                    (change)="pesquisarCidades()"
                  >
                    <option *ngFor="let estado of estados" [value]="estado.uf">
                      {{ estado.uf }}
                    </option>
                  </select>
                </div>
              </div>
            </div>
            <div
              class="mensagem__erro"
              *ngIf="formularioPessoaJuridica.get('pessoa.endereco.cidade.estado.uf')?.errors?.['required'] && formularioPessoaJuridica.get('pessoa.endereco.cidade.estado.uf')?.touched"
            >
              UF do estado é obrigatório!
            </div>

            <div formGroupName="cidade">
              <div class="campo">
                <label class="label-input" for="cidade">Cidade</label>
                <select class="input" id="cidade" formControlName="nome">
                  <option *ngFor="let cidade of cidades" [value]="cidade.nome">
                    {{ cidade.nome }}
                  </option>
                </select>
              </div>
              <div
                class="mensagem__erro"
                *ngIf="formularioPessoaJuridica.get('pessoa.endereco.cidade.nome')?.errors?.['required'] && formularioPessoaJuridica.get('pessoa.endereco.cidade.nome')?.touched"
              >
                Cidade é obrigatório!
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="erro-duplicidade" *ngIf="mensagemDeErro != null">
    <p id="mensagem-de-erro">{{ mensagemDeErro }}</p>
  </div>
  <div class="mensagem-pessoa-nao-encontrada" *ngIf="pessoaNaoEncontrada != null">{{ pessoaNaoEncontrada }}</div>
  <div class="botoes">
    <button
      class="btnConcluir"
      (click)="cadastrar()"
      *ngIf="pessoaNaoEncontrada == null"
      [disabled]="!formularioPessoaJuridica.valid"
      [ngClass]="{
        btnDesativado: !formularioPessoaJuridica.valid
      }"
    >
      Concluir
    </button>
    <button class="btnVoltar" routerLink="/listarEmpresas">Voltar</button>
  </div>
</section>
